# å°å…‰AIåŠ©æ‰‹ - UIæ¶æ„è®¾è®¡æ–‡æ¡£

## UIç³»ç»Ÿæ¦‚è¿°

å°å…‰AIåŠ©æ‰‹é‡‡ç”¨**æƒ…ç»ªé©±åŠ¨UIè®¾è®¡**ï¼ŒåŸºäºJetpack Composeæ„å»ºäº†å®Œæ•´çš„Material3è®¾è®¡ç³»ç»Ÿã€‚UIå±‚ä¸ä»…ä»…æ˜¯å±•ç¤ºç•Œé¢ï¼Œæ›´æ˜¯å°å…‰æƒ…æ„Ÿè¡¨è¾¾çš„é‡è¦è½½ä½“ï¼Œé€šè¿‡åŠ¨æ€çš„é¢œè‰²ã€åŠ¨ç”»å’Œäº¤äº’æ¥ä¼ è¾¾å°å…‰çš„æƒ…ç»ªçŠ¶æ€ã€‚

### è®¾è®¡ç†å¿µ

1. **æƒ…ç»ªé©±åŠ¨**: UIé¢œè‰²å’Œé£æ ¼éšå°å…‰æƒ…ç»ªå®æ—¶å˜åŒ–
2. **æ¸©æš–äººæ€§åŒ–**: ä½¿ç”¨æ¸©æš–çš„é…è‰²å’Œå‹å¥½çš„æ–‡æ¡ˆ
3. **æµç•…åŠ¨ç”»**: ä¸°å¯Œçš„é¡µé¢è½¬åœºå’Œäº¤äº’åŠ¨ç”»
4. **åŸå­è®¾è®¡**: ä»åŸå­åˆ°æ¨¡æ¿çš„ç»„ä»¶åŒ–ä½“ç³»
5. **æ˜æš—åŒä¸»é¢˜**: å®Œæ•´æ”¯æŒæ˜æš—ä¸¤ç§ä¸»é¢˜æ¨¡å¼

## æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      UIæ¶æ„ä½“ç³»                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è®¾è®¡ç³»ç»Ÿå±‚ (Design System)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ è®¾è®¡è§„èŒƒ     â”‚  ä¸»é¢˜ç³»ç»Ÿ    â”‚    åŠ¨ç”»ç³»ç»Ÿ          â”‚ â”‚
â”‚  â”‚ XiaoguangDS â”‚XiaoguangThemeâ”‚XiaoguangAnimations   â”‚ â”‚
â”‚  â”‚              â”‚              â”‚                      â”‚ â”‚
â”‚  â”‚ â€¢ é¢œè‰²è§„èŒƒ   â”‚ â€¢ æƒ…ç»ªä¸»é¢˜   â”‚ â€¢ è½¬åœºåŠ¨ç”»           â”‚ â”‚
â”‚  â”‚ â€¢ é—´è·ç³»ç»Ÿ   â”‚ â€¢ æ˜æš—æ¨¡å¼   â”‚ â€¢ äº¤äº’åé¦ˆ           â”‚ â”‚
â”‚  â”‚ â€¢ å­—ä½“è§„èŒƒ   â”‚ â€¢ Material3  â”‚ â€¢ Modifieræ‰©å±•       â”‚ â”‚
â”‚  â”‚ â€¢ åœ†è§’é˜´å½±   â”‚ â€¢ æ¸©æš–æ–‡æ¡ˆ   â”‚ â€¢ å¾ªç¯åŠ¨ç”»           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç»„ä»¶å±‚ (Components)                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ åŸå­ç»„ä»¶     â”‚  åˆ†å­ç»„ä»¶    â”‚    ç”Ÿç‰©ç»„ä»¶          â”‚ â”‚
â”‚  â”‚              â”‚              â”‚                      â”‚ â”‚
â”‚  â”‚ â€¢ å°å…‰å¤´åƒ   â”‚ â€¢ å¡ç‰‡ç»„ä»¶   â”‚ â€¢ å¤æ‚è¡¨å•           â”‚ â”‚
â”‚  â”‚ â€¢ çŠ¶æ€æŒ‡ç¤ºå™¨ â”‚ â€¢ æŒ‰é’®ç»„ä»¶   â”‚ â€¢ åˆ—è¡¨ç»„ä»¶           â”‚ â”‚
â”‚  â”‚ â€¢ æƒ…ç»ªæŒ‡ç¤ºå™¨ â”‚ â€¢ è¾“å…¥æ¡†     â”‚ â€¢ å¯¼èˆªç»„ä»¶           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é¡µé¢å±‚ (Screens) - 13ä¸ªé¡µé¢                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ åº•éƒ¨å¯¼èˆª(5)  â”‚ æŠ½å±‰èœå•(6)  â”‚    è¯¦æƒ…é¡µ(å¤šä¸ª)      â”‚ â”‚
â”‚  â”‚              â”‚              â”‚                      â”‚ â”‚
â”‚  â”‚ â€¢ å°å…‰ä¸­å¿ƒ   â”‚ â€¢ è®°å¿†æµè§ˆ   â”‚ â€¢ äººç‰©è¯¦æƒ…           â”‚ â”‚
â”‚  â”‚ â€¢ å¯¹è¯       â”‚ â€¢ çŸ¥è¯†ä¸­å¿ƒ   â”‚ â€¢ è®°å¿†è¯¦æƒ…           â”‚ â”‚
â”‚  â”‚ â€¢ äººç‰©       â”‚ â€¢ å¿ƒæµçŠ¶æ€   â”‚ â€¢ çŸ¥è¯†è¯¦æƒ…           â”‚ â”‚
â”‚  â”‚ â€¢ æ—¥ç¨‹       â”‚ â€¢ å¾…åŠäº‹é¡¹   â”‚                      â”‚ â”‚
â”‚  â”‚ â€¢ æˆ‘çš„       â”‚ â€¢ ç¯å¢ƒç›‘å¬   â”‚                      â”‚ â”‚
â”‚  â”‚              â”‚ â€¢ å¼€å‘è€…é€‰é¡¹ â”‚                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  çŠ¶æ€ç®¡ç†å±‚ (State Management)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  XiaoguangCoreState - ç»Ÿä¸€çŠ¶æ€å®¹å™¨                   â”‚ â”‚
â”‚  â”‚  â€¢ EmotionState  â€¢ FlowState  â€¢ SpeakerState         â”‚ â”‚
â”‚  â”‚  â€¢ EnvironmentState  â€¢ ConversationState             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è®¾è®¡ç³»ç»Ÿ (Design System)

### XiaoguangDesignSystem.kt

**æ–‡ä»¶ä½ç½®**: `presentation/design/XiaoguangDesignSystem.kt` (248è¡Œ)

**æ ¸å¿ƒè§„èŒƒ**:

#### 1. æƒ…ç»ªè‰²å½©ç³»ç»Ÿ
6ç§æ ¸å¿ƒæƒ…ç»ªï¼Œæ¯ç§4ä¸ªè‰²é˜¶ï¼ˆprimary, secondary, background, accentï¼‰:
- ğŸ˜Š **å¼€å¿ƒ** (Happy) - æ¸©æš–æ©™é»„è‰² `#FFB84D`
- ğŸ˜´ **å¹³é™** (Calm) - æŸ”å’Œè“ç´«è‰² `#9FA8DA`
- ğŸ¤” **æ€è€ƒ** (Curious) - æ™ºæ…§é’ç»¿è‰² `#4DB6AC`
- ğŸ˜® **æƒŠè®¶** (Surprised) - æ´»æ³¼ç²‰ç´«è‰² `#BA68C8`
- ğŸ˜¢ **éš¾è¿‡** (Sad) - æŸ”å’Œç°è“è‰² `#90A4AE`
- ğŸ˜… **å°´å°¬** (Embarrassed) - æ¸©å’Œç«ç‘°ç²‰ `#F06292`

#### 2. åŠ¨ç”»æ—¶é•¿è§„èŒƒ
```kotlin
object AnimationDurations {
    const val FAST = 150              // å¿«é€ŸåŠ¨ç”»
    const val NORMAL = 300            // æ­£å¸¸åŠ¨ç”»
    const val SLOW = 500              // æ…¢é€ŸåŠ¨ç”»
    const val EMOTION_CHANGE = 600    // æƒ…ç»ªå˜åŒ–
    const val THOUGHT_BUBBLE = 400    // æ€è€ƒæ°”æ³¡
    const val AVATAR_PULSE = 2000     // å¤´åƒå‘¼å¸
    const val SPEAKER_INDICATOR = 300 // è¯´è¯äººæŒ‡ç¤º
    const val FLOW_IMPULSE = 800      // å¿ƒæµè„‰å†²
}
```

#### 3. é—´è·ç³»ç»Ÿ (8dpç½‘æ ¼)
```kotlin
object Spacing {
    val xxxs = 2.dp   // æå°é—´è·
    val xxs = 4.dp    // è¶…å°é—´è·
    val xs = 8.dp     // å°é—´è·
    val sm = 12.dp    // ä¸­å°é—´è·
    val md = 16.dp    // ä¸­ç­‰é—´è·ï¼ˆé»˜è®¤ï¼‰
    val lg = 24.dp    // å¤§é—´è·
    val xl = 32.dp    // è¶…å¤§é—´è·
    val xxl = 48.dp   // æå¤§é—´è·
    val xxxl = 64.dp  // è¶…æå¤§é—´è·
}
```

### XiaoguangTheme.kt

**æ–‡ä»¶ä½ç½®**: `presentation/design/XiaoguangTheme.kt` (263è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:

#### 1. æ˜æš—åŒä¸»é¢˜
- **LightColorScheme**: æ¸©æš–ç±³ç™½èƒŒæ™¯ (#FFFBF7)
- **DarkColorScheme**: æ·±è‰²èƒŒæ™¯ (#1C1B1F)

#### 2. æƒ…ç»ªä¸»é¢˜æ˜ å°„
```kotlin
fun EmotionType.toThemeColors(isDark: Boolean = false): EmotionThemeColors
```
è‡ªåŠ¨æ ¹æ®æƒ…ç»ªå’Œä¸»é¢˜æ¨¡å¼é€‰æ‹©æœ€ä½³é…è‰²æ–¹æ¡ˆã€‚

#### 3. Material3 Typography
å®Œæ•´çš„æ–‡å­—ä½“ç³»ï¼ˆDisplayã€Headlineã€Bodyã€Labelï¼‰ã€‚

### XiaoguangAnimations.kt

**æ–‡ä»¶ä½ç½®**: `presentation/design/XiaoguangAnimations.kt` (340è¡Œ) â­æ–°å¢

**æ ¸å¿ƒåŠŸèƒ½**:

#### 1. é¡µé¢è½¬åœºåŠ¨ç”»
```kotlin
object Transitions {
    fun fadeInOut()          // æ·¡å…¥æ·¡å‡º + ç¼©æ”¾
    fun slideInFromRight()   // ä»å³ä¾§æ»‘å…¥
    fun slideInFromBottom()  // ä»åº•éƒ¨æ»‘å…¥
    fun expandVertically()   // å‚ç›´å±•å¼€
}
```

#### 2. å¾ªç¯åŠ¨ç”»
```kotlin
@Composable fun rememberPulseAnimation()      // è„‰å†²åŠ¨ç”»
@Composable fun rememberBreathingAnimation()  // å‘¼å¸åŠ¨ç”»
@Composable fun rememberWaveAnimation()       // æ³¢åŠ¨åŠ¨ç”»
@Composable fun rememberShakeAnimation()      // éœ‡åŠ¨åŠ¨ç”»
```

#### 3. Modifieræ‰©å±•
```kotlin
fun Modifier.clickableScale()  // ç‚¹å‡»ç¼©æ”¾åé¦ˆ
fun Modifier.pulse()           // è„‰å†²æ•ˆæœ
fun Modifier.breathing()       // å‘¼å¸æ•ˆæœ
fun Modifier.animateEnter()    // é”™è½è¿›å…¥åŠ¨ç”»
```

### XiaoguangPhrases.kt

**æ–‡ä»¶ä½ç½®**: `presentation/design/XiaoguangPhrases.kt` (358è¡Œ)

**æ¸©æš–æ–‡æ¡ˆåº“**ï¼ŒåŒ…å«ï¼š
- é—®å€™è¯­ (Greeting)
- æƒ…ç»ªæè¿° (Emotion)
- å¿ƒæµçŠ¶æ€ (Flow)
- ç¤¾äº¤ç›¸å…³ (Social)
- æ—¥ç¨‹ç›¸å…³ (Schedule)
- å¼€å‘è€…æ–‡æ¡ˆ (Developer)
- è®¾ç½®é¡¹ (Settings)

## åŸå­ç»„ä»¶ (Atomic Components)

### XiaoguangAvatar.kt

**æ–‡ä»¶ä½ç½®**: `presentation/components/XiaoguangAvatar.kt` (426è¡Œ)

**åŠŸèƒ½ç‰¹æ€§**:
- **6ç§è¡¨æƒ…ç»˜åˆ¶**: ä½¿ç”¨Canvas APIç»˜åˆ¶ä¸åŒæƒ…ç»ªè¡¨æƒ…
- **å‘¼å¸åŠ¨ç”»**: å¾®å¦™çš„ç¼©æ”¾æ•ˆæœï¼ˆ0.95 ~ 1.05ï¼‰
- **è„‰å†²å…‰æ™•**: è¯´è¯/æ€è€ƒæ—¶çš„å¤–å‘å…‰æ•ˆæœ
- **è¡¨æƒ…åˆ‡æ¢**: å¹³æ»‘çš„æƒ…ç»ªè¿‡æ¸¡åŠ¨ç”»

**æ ¸å¿ƒä»£ç **:
```kotlin
@Composable
fun XiaoguangAvatar(
    emotion: EmotionType,
    size: Dp = XiaoguangDesignSystem.AvatarSize.lg,
    showPulse: Boolean = false,
    enableBreathing: Boolean = true
)
```

### StatusIndicator.kt

**æ–‡ä»¶ä½ç½®**: `presentation/components/StatusIndicator.kt`

åŒ…å«3ç§æŒ‡ç¤ºå™¨ï¼š
- **EmotionIndicator**: æƒ…ç»ªåç§° + å›¾æ ‡
- **FlowImpulseIndicator**: å¿ƒæµå†²åŠ¨å¼ºåº¦è¿›åº¦æ¡
- **SpeakerIndicator**: è¯´è¯äººè¯†åˆ«çŠ¶æ€

### XiaoguangCards.kt

**æ–‡ä»¶ä½ç½®**: `presentation/components/XiaoguangCards.kt`

**æ ¸å¿ƒå¡ç‰‡ç»„ä»¶**:
- **PersonCard**: äººç‰©ä¿¡æ¯å¡ç‰‡ï¼ˆå¢å¼ºç‚¹å‡»åŠ¨ç”»ï¼‰
- **MemoryCard**: è®°å¿†æ¡ç›®å¡ç‰‡
- **ConversationMessageCard**: å¯¹è¯æ¶ˆæ¯å¡ç‰‡

æ‰€æœ‰å¡ç‰‡ä½¿ç”¨ `clickableScale` æä¾›è§¦è§‰åé¦ˆã€‚

### XiaoguangButtons.kt

**æ–‡ä»¶ä½ç½®**: `presentation/components/XiaoguangButtons.kt` (320è¡Œ)

**æŒ‰é’®ç»„ä»¶**:
- **XiaoguangPrimaryButton**: ä¸»æŒ‰é’®ï¼ˆæƒ…ç»ªä¸»è‰²ï¼‰
- **XiaoguangSecondaryButton**: æ¬¡è¦æŒ‰é’®ï¼ˆè½®å»“æ ·å¼ï¼‰
- **XiaoguangTextButton**: æ–‡æœ¬æŒ‰é’®
- **XiaoguangIconButton**: å›¾æ ‡æŒ‰é’®
- **XiaoguangFab**: æ‚¬æµ®æ“ä½œæŒ‰é’®
- **XiaoguangTextField**: è¾“å…¥æ¡†

## é¡µé¢å®ç° (Screens)

### å¯¼èˆªæ¶æ„

**XiaoguangNavHost.kt** - ä¸»å¯¼èˆªå®¹å™¨
- 5ä¸ªåº•éƒ¨Tab: å°å…‰ä¸­å¿ƒã€å¯¹è¯ã€äººç‰©ã€æ—¥ç¨‹ã€æˆ‘çš„
- 6ä¸ªæŠ½å±‰èœå•: è®°å¿†æµè§ˆã€çŸ¥è¯†ä¸­å¿ƒã€å¿ƒæµçŠ¶æ€ã€å¾…åŠã€ç¯å¢ƒç›‘å¬ã€å¼€å‘è€…é€‰é¡¹
- å¤šä¸ªè¯¦æƒ…é¡µ: PersonDetailã€MemoryDetailç­‰

**è½¬åœºåŠ¨ç”»ç­–ç•¥**:
- åº•éƒ¨Tab â†’ `fadeInOut()` æ·¡å…¥æ·¡å‡º
- å¯¹è¯é¡µé¢ â†’ `slideInFromRight()` ä»å³æ»‘å…¥
- æŠ½å±‰èœå• â†’ `slideInFromBottom()` ä»åº•éƒ¨æ»‘å…¥
- å¼€å‘è€…é€‰é¡¹ â†’ `slideInFromRight()` ç‰¹æ®Šå…¥å£

### 1. å°å…‰ä¸­å¿ƒé¡µé¢ (XiaoguangCenterScreen)

**æ–‡ä»¶ä½ç½®**: `presentation/screens/center/XiaoguangCenterScreen.kt` (425è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:
- å¤§å¤´åƒå±•ç¤ºï¼ˆXXLå°ºå¯¸ï¼Œ128dpï¼‰
- æƒ…ç»ªæè¿°å¡ç‰‡
- å½“å‰æƒ³æ³•æ°”æ³¡ï¼ˆæµ®åŠ¨åŠ¨ç”»ï¼‰
- å¿ƒæµå†²åŠ¨æŒ‡ç¤ºå™¨
- è¯´è¯äººè¯†åˆ«çŠ¶æ€
- å¿«æ·æ“ä½œæŒ‰é’®

**é”™è½è¿›å…¥åŠ¨ç”»**:
```kotlin
// æ¯ä¸ªå…ƒç´ å»¶è¿Ÿ100msä¾æ¬¡å‡ºç°
AvatarSection(modifier = Modifier.animateEnter(delayMillis = 0))
EmotionCard(modifier = Modifier.animateEnter(delayMillis = 100))
ThoughtBubble(modifier = Modifier.animateEnter(delayMillis = 200))
FlowImpulseCard(modifier = Modifier.animateEnter(delayMillis = 300))
SpeakerCard(modifier = Modifier.animateEnter(delayMillis = 400))
QuickActions(modifier = Modifier.animateEnter(delayMillis = 500))
```

### 2. å¯¹è¯é¡µé¢ (NewConversationScreen)

**æ–‡ä»¶ä½ç½®**: `presentation/screens/conversation/NewConversationScreen.kt` (450è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:
- æ¶ˆæ¯åˆ—è¡¨ï¼ˆLazyColumnï¼‰
- æƒ…ç»ªæ ‡ç­¾æ˜¾ç¤º
- è¯´è¯äººæ ‡è®°
- æµå¼å›å¤æ”¯æŒ
- æ€è€ƒä¸­æŒ‡ç¤ºå™¨
- è¾“å…¥æ¡† + å‘é€æŒ‰é’®

### 3. äººç‰©ç®¡ç†é¡µé¢ (PeopleScreen)

**æ–‡ä»¶ä½ç½®**: `presentation/screens/people/PeopleScreen.kt` (370è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:
- äººç‰©åˆ—è¡¨ï¼ˆå£°çº¹+ç¤¾äº¤æ•´åˆï¼‰
- æœç´¢å’Œè¿‡æ»¤
- äº²å¯†åº¦è¯„åˆ†æ˜¾ç¤º
- ä¸»äººæ ‡è®°
- æ–°æœ‹å‹æ³¨å†Œå…¥å£

### 4. è®°å¿†æµè§ˆé¡µé¢ (MemoryBrowserScreen)

**æ–‡ä»¶ä½ç½®**: `presentation/screens/memory/MemoryBrowserScreen.kt` (430è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:
- æ—¶é—´çº¿è§†å›¾
- åˆ†ç±»ç­›é€‰ï¼ˆModalBottomSheetï¼‰
- è¯­ä¹‰æœç´¢
- æ’åºåŠŸèƒ½
- è®°å¿†å¡ç‰‡åˆ—è¡¨

### 5. çŸ¥è¯†ä¸­å¿ƒé¡µé¢ (KnowledgeHubScreen)

**æ–‡ä»¶ä½ç½®**: `presentation/screens/knowledge/KnowledgeHubScreen.kt` (200è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:
- 2x2ç½‘æ ¼å¸ƒå±€
- 4ä¸ªçŸ¥è¯†æ¨¡å—å¡ç‰‡:
  - ä¸–ç•Œä¹¦ (WorldBook)
  - è§’è‰²ä¹¦ (CharacterBook)
  - å‘é‡æ•°æ®åº“ (VectorDatabase)
  - å›¾æ•°æ®åº“ (GraphDatabase)

### 6. å¿ƒæµçŠ¶æ€é¡µé¢ (FlowStatusScreen)

**æ–‡ä»¶ä½ç½®**: `presentation/screens/flow/FlowStatusScreen.kt` (420è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:
- 4å±‚æ¶æ„å¯è§†åŒ–
- å½“å‰é˜¶æ®µé«˜äº®
- å½“å‰æƒ³æ³•æ˜¾ç¤º
- å¿ƒæµå†²åŠ¨æŒ‡ç¤º
- è¿è¡ŒçŠ¶æ€è¯¦æƒ…

### 7. æ—¥ç¨‹é¡µé¢ (ScheduleScreen)

**æ–‡ä»¶ä½ç½®**: `presentation/screens/schedule/ScheduleScreen.kt` (340è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:
- ä»Šæ—¥æ¦‚è§ˆå¡ç‰‡
- ä¼˜å…ˆçº§æ ‡è®°
- å®ŒæˆçŠ¶æ€å¤é€‰æ¡†
- ç±»å‹æ ‡ç­¾
- FABæ·»åŠ æŒ‰é’®

### 8. æˆ‘çš„é¡µé¢ (ProfileScreen)

**æ–‡ä»¶ä½ç½®**: `presentation/screens/profile/ProfileScreen.kt` (320è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:
- å°å…‰ä¿¡æ¯å¡ç‰‡ï¼ˆå¤´åƒ+ç»Ÿè®¡ï¼‰
- åŠŸèƒ½è®¾ç½®ç»„
- é«˜çº§é€‰é¡¹ç»„
- ç‰ˆæœ¬ä¿¡æ¯

### 9. å¼€å‘è€…é€‰é¡¹é¡µé¢ (DeveloperOptionsScreen)

**æ–‡ä»¶ä½ç½®**: `presentation/screens/developer/DeveloperOptionsScreen.kt` (390è¡Œ)

**æ ¸å¿ƒåŠŸèƒ½**:
- è­¦å‘Šå¡ç‰‡
- è°ƒè¯•å·¥å…·ç»„
- æ•°æ®ç®¡ç†ç»„
- å±é™©æ“ä½œåŒºï¼ˆåŒé‡ç¡®è®¤ï¼‰

## çŠ¶æ€ç®¡ç†

### XiaoguangCoreState.kt

**æ–‡ä»¶ä½ç½®**: `domain/state/XiaoguangCoreState.kt`

**ç»Ÿä¸€çŠ¶æ€å®¹å™¨**:
```kotlin
data class XiaoguangCoreState(
    val emotion: EmotionState,           // æƒ…ç»ªçŠ¶æ€
    val flow: FlowState,                 // å¿ƒæµçŠ¶æ€
    val speaker: SpeakerState,           // è¯´è¯äººçŠ¶æ€
    val environment: EnvironmentState,   // ç¯å¢ƒçŠ¶æ€
    val conversation: ConversationState, // å¯¹è¯çŠ¶æ€
    val system: SystemState              // ç³»ç»ŸçŠ¶æ€
)
```

### XiaoguangCoreStateManager.kt

**æ–‡ä»¶ä½ç½®**: `domain/state/XiaoguangCoreStateManagerImpl.kt`

**çŠ¶æ€ç®¡ç†å™¨**:
- ä½¿ç”¨ `StateFlow` å‘å¸ƒçŠ¶æ€
- Hiltä¾èµ–æ³¨å…¥
- çº¿ç¨‹å®‰å…¨çš„çŠ¶æ€æ›´æ–°

## UIæœ€ä½³å®è·µ

### 1. ç»„ä»¶è®¾è®¡
- æ‰€æœ‰ç»„ä»¶æ”¯æŒ `modifier` å‚æ•°
- ä½¿ç”¨ `LocalEmotionColors.current` è·å–å½“å‰æƒ…ç»ªé¢œè‰²
- ä¼˜å…ˆä½¿ç”¨è®¾è®¡ç³»ç»Ÿå®šä¹‰çš„è§„èŒƒå€¼

### 2. åŠ¨ç”»ä½¿ç”¨
- é¡µé¢è½¬åœºä½¿ç”¨ `XiaoguangAnimations.Transitions`
- äº¤äº’åé¦ˆä½¿ç”¨ `clickableScale`
- å¾ªç¯åŠ¨ç”»ä½¿ç”¨ `remember*Animation()`
- è¿›å…¥åŠ¨ç”»ä½¿ç”¨ `animateEnter(delayMillis)`

### 3. çŠ¶æ€ç®¡ç†
- ViewModelä½¿ç”¨ `@HiltViewModel`
- çŠ¶æ€ä½¿ç”¨ `StateFlow` + `collectAsState()`
- é¿å…åœ¨Composableä¸­ç›´æ¥ä¿®æ”¹çŠ¶æ€

### 4. ä¸»é¢˜ä½¿ç”¨
```kotlin
@Composable
fun MyScreen() {
    val emotionColors = LocalEmotionColors.current

    Card(
        colors = CardDefaults.cardColors(
            containerColor = emotionColors.background
        )
    ) {
        Text(
            text = "Hello",
            color = emotionColors.primary
        )
    }
}
```

## æ€§èƒ½ä¼˜åŒ–

### 1. åˆ—è¡¨ä¼˜åŒ–
- ä½¿ç”¨ `LazyColumn`/`LazyRow`
- æä¾›ç¨³å®šçš„ `key`
- ä½¿ç”¨ `remember` ç¼“å­˜è®¡ç®—

### 2. é‡ç»„ä¼˜åŒ–
- ä½¿ç”¨ `remember` ç¼“å­˜çŠ¶æ€
- ä½¿ç”¨ `derivedStateOf` æ´¾ç”ŸçŠ¶æ€
- é¿å…åœ¨Composableä¸­åˆ›å»ºæ–°å¯¹è±¡

### 3. åŠ¨ç”»ä¼˜åŒ–
- ä½¿ç”¨ `animationSpec` æ§åˆ¶åŠ¨ç”»æ›²çº¿
- é¿å…è¿‡åº¦ä½¿ç”¨å¾ªç¯åŠ¨ç”»
- åˆç†è®¾ç½®åŠ¨ç”»æ—¶é•¿

## å¼€å‘å·¥å…·

### é¢„è§ˆæ”¯æŒ
æ‰€æœ‰ä¸»è¦ç»„ä»¶éƒ½æä¾› `@Preview` é¢„è§ˆ:
```kotlin
@Preview(showBackground = true)
@Composable
private fun XiaoguangAvatarPreview() {
    XiaoguangTheme(emotion = EmotionType.HAPPY) {
        XiaoguangAvatar(
            emotion = EmotionType.HAPPY,
            size = XiaoguangDesignSystem.AvatarSize.xl
        )
    }
}
```

### ä¸»é¢˜åˆ‡æ¢æµ‹è¯•
```kotlin
@Preview(name = "Light Mode")
@Preview(name = "Dark Mode", uiMode = UI_MODE_NIGHT_YES)
@Composable
private fun PreviewBothThemes() {
    XiaoguangTheme {
        MyComponent()
    }
}
```

## ä»£ç ç»Ÿè®¡

```
è®¾è®¡ç³»ç»Ÿï¼š   900è¡Œï¼ˆ4ä¸ªæ–‡ä»¶ï¼‰
åŸå­ç»„ä»¶ï¼š   1,250è¡Œï¼ˆ4ä¸ªæ–‡ä»¶ï¼‰
é¡µé¢å®ç°ï¼š   3,430è¡Œï¼ˆ13ä¸ªScreen + ViewModelï¼‰
å¯¼èˆªç³»ç»Ÿï¼š   400è¡Œï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
UIå±‚æ€»è®¡ï¼š   çº¦ 6,000è¡Œä»£ç 
```

## æœªæ¥è§„åˆ’

1. **ç»„ä»¶åº“æ‰©å±•**
   - æ›´å¤šè‡ªå®šä¹‰ç»„ä»¶
   - å›¾è¡¨ç»„ä»¶
   - åŠ¨ç”»ç»„ä»¶åº“

2. **åŠ¨ç”»å¢å¼º**
   - å…±äº«å…ƒç´ è½¬åœº
   - æ‰‹åŠ¿åŠ¨ç”»
   - ç‰©ç†åŠ¨ç”»

3. **ä¸»é¢˜æ‰©å±•**
   - æ›´å¤šæƒ…ç»ªä¸»é¢˜
   - è‡ªå®šä¹‰ä¸»é¢˜
   - èŠ‚æ—¥ä¸»é¢˜

4. **æ— éšœç¢æ”¯æŒ**
   - å®Œå–„è¯­ä¹‰æè¿°
   - æ”¯æŒå±å¹•é˜…è¯»å™¨
   - å­—ä½“ç¼©æ”¾ä¼˜åŒ–

---

*æœ€åæ›´æ–°: 2025-11-17*
*UIé‡æ„å®Œæˆï¼Œæƒ…ç»ªé©±åŠ¨è®¾è®¡ï¼Œæ¸©æš–è´´å¿ƒä½“éªŒ* ğŸŒŸ
